(window.webpackJsonp=window.webpackJsonp||[]).push([["pl-search"],{130:function(e,t,n){"use strict";n.r(t),n.d(t,"Search",function(){return I});var o,i,a,r=n(3),s=n(0),u=(n(2),n(151)),c=n.n(u),l=n(152),h=n.n(l),p=n(16),g=n.n(p),d=n(38),f=n.n(d),y=n(15),v=n(188),b=n.n(v),S=n(6),m=n(8);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function O(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?C(e):t}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t,n){return(j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=Object(r.a)((a=i=function(e){function t(e){var n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=o=O(this,k(t).call(this,e)),R(C(o),"onInput",function(e){var t=e.target.value;o.setState({value:t}),o.onSuggestionsFetchRequested({value:t})}),R(C(o),"getSuggestionValue",function(e){return e.label}),R(C(o),"onChange",function(e,t){var n=t.newValue;S.h.getFileName(n)&&document.querySelector("pl-iframe").navigateTo(n),o.setState({value:n})}),R(C(o),"onSuggestionsFetchRequested",function(e){var t=e.value;o.setState({isOpen:!0}),o.setState({suggestions:o.getSuggestions(t)})}),R(C(o),"onSuggestionsClearRequested",function(){o.setState({suggestions:[]}),o.setState({isOpen:!1})}),(e=n).useShadow=!1,e.defaultMaxResults=10,e.state={value:"",suggestions:[],isFocused:!1},e.receiveIframeMessage=e.receiveIframeMessage.bind(e),e.onChange=e.onChange.bind(e),e.toggleSearch=e.toggleSearch.bind(e),e.closeSearch=e.closeSearch.bind(e),e.renderInputComponent=e.renderInputComponent.bind(e),e.openSearch=e.openSearch.bind(e),O(o,e)}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,m["a"]),n=t,(o=[{key:"connecting",value:function(){for(var e in j(k(t.prototype),"connecting",this)&&j(k(t.prototype),"connecting",this).call(this),this.items=[],window.patternPaths)if(window.patternPaths.hasOwnProperty(e))for(var n in window.patternPaths[e])if(window.patternPaths[e].hasOwnProperty(n)){var o={};o.label=e+"-"+n,o.id=window.patternPaths[e][n],this.items.push(o)}}},{key:"connected",value:function(){var e=this;f.a.bind("command+shift+f",function(t){t.preventDefault(),e.toggleSearch()}),window.addEventListener("message",this.receiveIframeMessage,!1)}},{key:"_stateChanged",value:function(e){this.triggerUpdate()}},{key:"rendered",value:function(){this.inputElement=this.querySelector(".js-c-typeahead__input")}},{key:"toggleSearch",value:function(){this.state.isOpen?this.closeSearch():this.openSearch()}},{key:"clearSearch",value:function(){this.inputElement.focus(),this.setState({value:""})}},{key:"openSearch",value:function(){this.inputElement.focus()}},{key:"closeSearch",value:function(){document.activeElement.blur()}},{key:"receiveIframeMessage",value:function(e){if("file:"===window.location.protocol||e.origin===window.location.protocol+"//"+window.location.host){var t={};try{t="string"!=typeof e.data?e.data:JSON.parse(e.data)}catch(e){}void 0!==t.event&&"patternLab.keyPress"===t.event&&"f"===t.key&&!0===t.metaKey&&this.toggleSearch()}}},{key:"renderSuggestion",value:function(e,t){t.query,t.isHighlighted;return Object(s.h)("span",null,e.highlightedLabel)}},{key:"getSuggestions",value:function(e){var t=this.props.maxResults?this.props.maxResults:this.defaultMaxResults,n=new c.a(this.items,{shouldSort:!0,threshold:.3,tokenize:!0,includeMatches:!0,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:["label"]}).search(e);n.forEach(function(e){!function e(t){var n=t;n.matches.forEach(function(t){for(var o=n.item[t.key],i=[],a=[].concat(t.indices),r=a.shift(),s=0;s<o.length;s++){var u=o.charAt(s);r&&s===r[0]&&i.push("<strong>"),i.push(u),r&&s===r[1]&&(i.push("</strong>"),r=a.shift())}n.item.highlightedLabel=i.join(""),n.item.highlightedLabel=h()(n.item.highlightedLabel),n.children&&n.children.length>0&&n.children.forEach(function(t){e(t)})})}(e)});var o=n.reduce(function(e,t){return e.push(t.item),e},[]);return o.length<t?o:o.slice(0,t)}},{key:"renderInputComponent",value:function(e){var t=this,n=this.state.value,o=void 0!==this.props.hideClearButton&&!0!==this.props.hideClearButton&&""!==n,i=this.props.clearButtonText?this.props.clearButtonText:"Clear Search Results";return Object(s.h)("div",{className:g()("pl-c-typeahead__input-wrapper",R({},"pl-c-typeahead__input-wrapper--with-clear-button",o))},Object(s.h)("input",e),o&&Object(s.h)("button",{className:g()("pl-c-typeahead__clear-button",R({},"pl-is-visible",""!==n)),onClick:function(){t.clearSearch()}},Object(s.h)(y.a,null,i),Object(s.h)("svg",{viewBox:"0 0 16 16",height:"16",width:"16",className:"pl-c-typeahead__clear-button-icon"},Object(s.h)("title",null,i),Object(s.h)("path",{d:"M12.207 10.793l-1.414 1.414-2.793-2.793-2.793 2.793-1.414-1.414 2.793-2.793-2.793-2.793 1.414-1.414 2.793 2.793 2.793-2.793 1.414 1.414-2.793 2.793 2.793 2.793z"}))))}},{key:"onSuggestionSelected",value:function(){this.setState({isOpen:!1})}},{key:"render",value:function(){var e=this.state,t=e.value,n=e.suggestions,o=void 0!==this.props.hideClearButton&&!0!==this.props.hideClearButton&&""!==t,i={container:g()("pl-c-typeahead"),containerOpen:g()("pl-c-typeahead--open"),input:g()("pl-c-typeahead__input","js-c-typeahead__input",R({},"pl-c-typeahead__input--with-clear-button",o)),inputOpen:g()("pl-c-typeahead__input--open"),inputFocused:g()("pl-c-typeahead__input--focused"),suggestionsContainer:g()("pl-c-typeahead__menu"),suggestionsContainerOpen:g()("pl-is-open"),suggestionsList:g()("pl-c-typeahead__results"),suggestion:g()("pl-c-typeahead__result"),suggestionFirst:g()("pl-c-typeahead__result--first"),suggestionHighlighted:g()("pl-has-cursor"),sectionContainer:g()("pl-c-typeahead__section-container"),sectionContainerFirst:g()("pl-c-typeahead__section-container--first"),sectionTitle:g()("pl-c-typeahead__section-title")},a={placeholder:this.props.placeholder?this.props.placeholder:"Find a Pattern",value:t,onChange:this.onChange,onInput:this.onInput};return Object(s.h)("div",null,Object(s.h)(b.a,{theme:i,suggestions:n,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,getSuggestionValue:this.getSuggestionValue,renderSuggestion:this.renderSuggestion,inputProps:a,renderInputComponent:this.renderInputComponent}))}}])&&_(n.prototype,o),i&&_(n,i),t}(),R(i,"is","pl-search"),R(i,"props",{maxResults:r.c.string,placeholder:r.c.string,hideClearButton:r.c.boolean,clearButtonText:r.c.string}),o=a))||o},170:function(e,t){}}]);