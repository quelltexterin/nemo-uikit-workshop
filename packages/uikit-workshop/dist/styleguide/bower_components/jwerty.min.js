!function(u,e){var f,c,r=u.document,o=u.jQuery||u.Zepto||u.ender||r,a="keydown";function l(e,t){return null===e?"null"===t:void 0===e?"undefined"===t:e.is&&e instanceof o?"element"===t:7<Object.prototype.toString.call(e).toLowerCase().indexOf(t)}o===r?(f=function(e,t){return e?o.querySelector(e,t||o):o},c=function(e,t){e.addEventListener(a,t,!1)},$f=function(e,t){var n,r=document.createEvent("Event");for(n in r.initEvent(a,!0,!0),t)r[n]=t[n];return(e||o).dispatchEvent(r)}):(f=function(e,t,n){return o(e||r,t)},c=function(e,t){o(e).bind(a+".jwerty",t)},$f=function(e,t){o(e||r).trigger(o.Event(a,t))});var y={16:"shiftKey",17:"ctrlKey",18:"altKey",91:"metaKey"},d={mods:{"⇧":16,shift:16,"⌃":17,ctrl:17,"⌥":18,alt:18,option:18,"⌘":91,meta:91,cmd:91,super:91,win:91},keys:{"⌫":8,backspace:8,"⇥":9,"⇆":9,tab:9,"↩":13,return:13,enter:13,"⌅":13,pause:19,"pause-break":19,"⇪":20,caps:20,"caps-lock":20,"⎋":27,escape:27,esc:27,space:32,"↖":33,pgup:33,"page-up":33,"↘":34,pgdown:34,"page-down":34,"⇟":35,end:35,"⇞":36,home:36,ins:45,insert:45,del:46,delete:46,"←":37,left:37,"arrow-left":37,"↑":38,up:38,"arrow-up":38,"→":39,right:39,"arrow-right":39,"↓":40,down:40,"arrow-down":40,"*":106,star:106,asterisk:106,multiply:106,"+":107,plus:107,"-":109,subtract:109,";":186,semicolon:186,"=":187,equals:187,",":188,comma:188,".":190,period:190,"full-stop":190,"/":191,slash:191,"forward-slash":191,"`":192,tick:192,"back-quote":192,"[":219,"open-bracket":219,"\\":220,"back-slash":220,"]":221,"close-bracket":221,"'":222,quote:222,apostraphe:222}};for(t=95,n=0;++t<106;)d.keys["num-"+n]=t,++n;for(t=47,n=0;++t<58;)d.keys[n]=t,++n;for(t=111,n=1;++t<136;)d.keys["f"+n]=t,++n;for(var t=64;++t<91;)d.keys[String.fromCharCode(t).toLowerCase()]=t;function p(e){var t,n,r,o,a,i,s,u;if(e instanceof p)return e;for(l(e,"array")||(e=String(e).replace(/\s/g,"").toLowerCase().match(/(?:\+,|[^,])+/g)),t=0,n=e.length;t<n;++t){for(l(e[t],"array")||(e[t]=String(e[t]).match(/(?:\+\/|[^\/])+/g)),i=[],r=e[t].length;r--;){var f=e[t][r];for(a={jwertyCombo:String(f),shiftKey:!1,ctrlKey:!1,altKey:!1,metaKey:!1},l(f,"array")||(f=String(f).toLowerCase().match(/(?:(?:[^\+])+|\+\+|^\+$)/g)),o=f.length;o--;)"++"===f[o]&&(f[o]="+"),f[o]in d.mods?a[y[d.mods[f[o]]]]=!0:f[o]in d.keys?a.keyCode=d.keys[f[o]]:s=f[o].match(/^\[([^-]+\-?[^-]*)-([^-]+\-?[^-]*)\]$/);if(l(a.keyCode,"undefined"))if(s&&s[1]in d.keys&&s[2]in d.keys){for(s[2]=d.keys[s[2]],s[1]=d.keys[s[1]],u=s[1];u<s[2];++u)i.push({altKey:a.altKey,shiftKey:a.shiftKey,metaKey:a.metaKey,ctrlKey:a.ctrlKey,keyCode:u,jwertyCombo:String(f)});a.keyCode=u}else a.keyCode=0;i.push(a)}this[t]=i}return this.length=t,this}var m=e.jwerty={event:function(t,n,r){if(l(n,"boolean")){var e=n;n=function(){return e}}t=new p(t);var o,a=0,i=t.length-1;return function(e){if(o=m.is(t,e,a))return a<i?void++a:(!1===n.call(r||this,e,o)&&e.preventDefault(),void(a=0));a=m.is(t,e)?1:0}},is:function(e,t,n){e=(e=new p(e))[n=n||0],t=t.originalEvent||t;for(var r=e.length,o=!1;r--;){for(var a in o=e[r].jwertyCombo,e[r])"jwertyCombo"!==a&&t[a]!=e[r][a]&&(o=!1);if(!1!==o)return o}return o},key:function(e,t,n,r,o){var a=l(n,"element")||l(n,"string")?n:r,i=a===n?u:n,s=a===n?r:o;c(l(a,"element")?a:f(a,s),m.event(e,t,i))},fire:function(e,t,n,r){e=new p(e);var o=l(n,"number")?n:r;$f(l(t,"element")?t:f(t,n),e[o||0][0])},KEYS:d}}(this,"undefined"!=typeof module&&module.exports?module.exports:this);